#define DRI_BUZZER_C_

/* ------------------------------------------------------------------------------------------------
 *                                          Includes
 * ------------------------------------------------------------------------------------------------
 */
#include "dri_buzzer.h"

/**************************************************************************************************
 * @fn          Buzzer_Init
 * @brief       P2.0端口蜂鸣器初始化
 * @param       无
 * @return      无
 **************************************************************************************************
 */
void Buzzer_Init(void)
{
  BUZZER  =  1;        //默认高电平
  P2INP  &= ~0x01;     //P2_0口设置为上拉
  P2SEL  &= ~0x01;     //P2_0口设置为普通IO口
  P2DIR  &= ~0x01;     //P2_0口设置为输入
}



/**************************************************************************************************
 * @fn          Buzzer_Timer4_Init
 * @brief       PWM初始化
 * @param       无
 * @return      无
 **************************************************************************************************
 */

void Buzzer_Timer4_Init(void)
{
  T4CCTL0 = 0x1C;      //T4备用位置2通道0 P2_0，当定时器=T3CC0中的比较值时，P2_0引脚在上升沿比较输出设置，0清除，比较模式
  T4CC0   = 0xFF;      //通道0捕获/比较值，起初设置为满值
  T4CTL  |= 0xE3;      //128分频；正/倒计数模式，这样的话占空比就是50%
  PERCFG |= 0x10;      //外设控制：定时器4备用位置2
}



